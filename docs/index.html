<!DOCTYPE HTML>
<html lang="ja">
<title>暑さ指数可視化マップ</title>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
	<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" >
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta property="og:title" content="暑さ指数可視化マップ" />
	<meta property="og:type" content="website" />
	<meta property="og:image" content="images/top.png" />
	<meta property="og:description" content="暑さ指数や湿度などの気象情報から、熱中症のリスクを警告し、適切な対策を提供するアプリです。日本の暑さはもはや災害です。暑さのリスクを事前に把握することで、体調管理にも役立ちます。アウトドアやスポーツ、夏場の作業などで活躍すること間違いなしです！" />
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="暑さ指数可視化マップ" />
	<meta name="twitter:image" content="images/top.png" />
	<meta name="twitter:description" content="暑さ指数や湿度などの気象情報から、熱中症のリスクを警告し、適切な対策を提供するアプリです。日本の暑さはもはや災害です。暑さのリスクを事前に把握することで、体調管理にも役立ちます。アウトドアやスポーツ、夏場の作業などで活躍すること間違いなしです！" />
	<meta name="author" content="仁志">
	<meta name="keywords" content="暑さ指数,熱中症,可視化"/>
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="shortcut icon" href="images/apple-touch-icon.png">

	<!-- leaflet -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
	<!-- modal window -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/linkevery2s/sourcecode/modal_window/main.css">
	<script src="https://cdn.jsdelivr.net/gh/linkevery2s/sourcecode/modal_window/main.js"></script>

	<!-- tailwind -->
	<script src="https://cdn.tailwindcss.com"></script>

	<!-- font awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" integrity="sha512-fD9DI5bZwQxOi7MhYWnnNPlvXdp/2Pj3XSTRrFs5FQa4mizyGLnJcN6tuvUS6LbmgN1ut+XGSABKvjN0H6Aoow==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<style>
		body,#map{
			width: 100%;
			height: 100%;
			padding: 0;
			margin: 0;
			z-index: 0;
		}

		html{
			padding: 0;
			margin: 0;
			width: 100%;
			height: 100%;
			background: #000;
		}

		#navigation_menu{
			position: fixed;
			z-index: 20;

		}

		#menu{
			z-index: 20;
		}

		#navigation_menu:before {
			font-family: 'Font Awesome 5 Free';
			content: "\f0c9";
			font-weight: 900;
			font-size: 1em;
			cursor: pointer;
		}

		.modal_content{
			background: #ffffff;
			padding: 10px;
			margin: 0;
			height: 450px !important;
			margin-top: -112px;
			overflow-y: scroll;
		}

		iframe {
			margin: 0;
			padding: 0;
			border: none;
			top: 50%;
			left: 50%;
			position: absolute;
			transform: translate(-50%, -50%);
			z-index: 1;
			height: 100%;
			width: 100%;

		}

		p a{
			border-bottom: 1px dotted #ffffff;
			
		}

		select {
			-webkit-appearance: none;
			appearance: none;
		}

		select {
			-moz-appearance: menulist;
			-webkit-appearance: menulist;
			appearance: menulist;
		}

		h2{
			position: relative;
		}
		h2:after {
			content: "";
			position: absolute;
			left: 0;
			bottom: 0;
			width: 100%;
			height: 7px;
			background: -webkit-repeating-linear-gradient(-45deg, #6ad1c8, #6ad1c8 2px, #fff 2px, #fff 4px);
			background: repeating-linear-gradient(-45deg, #6ad1c8, #6ad1c8 2px, #fff 2px, #fff 4px);
		}

	</style>
	<script type="module">

		onload = async () => {

			map.innerHTML = '<iframe src="map/1.html"></iframe>';

				/* fetchで取得 */
			const res = await fetch("https://raw.githubusercontent.com/linkevery2s/heatstroke/master/data/all.json");
			const data = await res.json();

			console.log(data[0][2]);

			console.log(data[0][2].slice(0, 4) + "年" + data[0][2].slice(4, -4) + "月" + data[0][2].slice(6, -2) + "日　" +  data[0][2].slice(-2) + "時");

			let day = new Array(10);
			let month = document.getElementById('month');

			for (let i = 2; i < 12; i++){
				day[i] = data[0][i];

				let option = document.createElement('option');
				option.setAttribute('value', i - 2);
				option.innerHTML = day[i].slice(0, 4) + "年" + day[i].slice(4, -4) + "月" + day[i].slice(6, -2) + "日 " +  day[i].slice(-2) + "時";
				month.appendChild(option);
			}

		}

		/* リストボックスが変わった時 */
		window.select_change = () => {

			let selindex = document.getElementById('month').selectedIndex;
			let target = document.getElementById('map');

			switch (selindex) {
			case 0:
				target.innerHTML = '<iframe src ="map/1.html"></iframe>';
				break;
			case 1:
				target.innerHTML = '<iframe src ="map/2.html"></iframe>';
				break;
			case 2:
				target.innerHTML = '<iframe src ="map/3.html"></iframe>';
				break;
			case 3:
				target.innerHTML = '<iframe src ="map/4.html"></iframe>';
				break;
			case 4:
				target.innerHTML = '<iframe src ="map/5.html"></iframe>';
				break;
			case 5:
				target.innerHTML = '<iframe src ="map/6.html"></iframe>';
				break;
			case 6:
				target.innerHTML = '<iframe src ="map/7.html"></iframe>';
				break;
			case 7:
				target.innerHTML = '<iframe src ="map/8.html"></iframe>';
				break;
			case 8:
				target.innerHTML = '<iframe src ="map/9.html"></iframe>';
				break;
			case 9:
				target.innerHTML = '<iframe src ="map/10.html"></iframe>';
				break;
			}

		}

	</script>

	<title>暑さ指数可視化マップ</title>

</head>
<body>

	<div id="menu" class="fixed top-0 mt-4 left-1/2 -translate-x-1/2">
		
		<select name="month" id="month"  onchange="select_change();" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block  p-3 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
		</select>

	</div>

	<div id="map"></div>

	<a href="javascript:void(0)" onClick="display()"><div id="navigation_menu" class="bg-gray-500 hover:bg-gray-300 py-2 px-3 bg-opacity-50 text-white top-0 right-0 mt-4 mr-4"></div></a>

	<!-- modal window -->
	<div class="modal js-modal">
		<div class="modal_bg" onClick="closed()"></div>
		<div class="modal_content"><!--<span class="closed" onClick="closed()">×</span>-->

			<h2 class="text-3xl mb-4 pb-1">本アプリについて</h2>
			<p>環境省が導入している<a href="https://www.wbgt.env.go.jp/" target="_blank">「暑さ指数」</a>をマップに可視化するアプリケーションです。
			</p>

			<h2 class="text-3xl mt-6 mb-4 pb-1">暑さ指数とは？</h2>
			<p>暑さ指数（WBGT（湿球黒球温度）：Wet Bulb Globe Temperature）は、熱中症を予防することを目的として1954年にアメリカで提案された指標です。 単位は気温と同じ摂氏度（℃）で示されますが、その値は気温とは異なります。暑さ指数（WBGT）は人体と外気との熱のやりとり（熱収支）に着目した指標で、人体の熱収支に与える影響の大きい ①湿度、 ②日射・輻射(ふくしゃ)など周辺の熱環境、 ③気温の３つを取り入れた指標です。
			</p>

			<h2 class="text-3xl mt-6 mb-4 pb-1">色分けについて</h2>
			<span style="background-color: #ff0000;">　　</span> 危険（31℃以上）<br>
			<span style="background-color: #ffa500;">　　</span> 厳重警戒（28～31℃）<br>
			<span style="background-color: #ffff00;">　　</span> 警戒（25～28℃）<br>
			<span style="background-color: #00ffff;">　　</span> 注意（21～25℃）<br>
			<span style="background-color: #0000ff;">　　</span> ほぼ安全（21度未満）

			<h2 class="text-3xl mt-6 mb-4 pb-1">オープンデータ</h2>
			<p>以下の出典を仁志が加工・編集して開発しました。<br>
				・環境省、<a href="https://www.wbgt.env.go.jp/data_service.php" target="_blank">暑さ指数(WBGT)予測値等 電子情報提供サービス</a>
			</p>



		</div>

	</div>

</body>
</html>
